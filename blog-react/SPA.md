## 什么是单页面应用(SPA)

- 单页面应用(SPA)是指用户在浏览器**加载单一的 HTML 页面**，**后续请求都无需再离开此页**
- 目标：旨在用为用户提供了**更接近本地移动 APP** 或桌面应用程序的体验，提高性能。
- 流程：第一次请求时，将导航页传输到客户端，其余请求通过 REST API 获取 JSON 数据
- 实现：数据的传输通过 Web Socket API 或 RPC(远程过程调用)。

## SPA 的优缺点

### 缺点

1. 不支持低版本的浏览器，最低只支持到 IE9；
2. 不利于 SEO 的优化（如果要支持 SEO，建议通过服务端来进行渲染组件）；
3. 第一次加载首页耗时相对长一些；
4. 不可以使用浏览器的导航按钮需要自行实现前进、后退。

### 优点

1. 无刷新体验,提升了用户体验；
2. 前端开发不再以页面为单位，更多地采用组件化的思想，代码结构和组织方式更加规范化，便于修改和调整；
3. API 共享，同一套后端程序代码不用修改就可以用于 Web 界面、手机、平板等多种客户端
4. 用户体验好、快，内容的改变不需要重新加载整个页面。

### SPA、单页面应用重新部署后，正在浏览的页面如何更新缓存

这里的这个问题，主要是当前项目已发，但是用户正在使用，**这个时候 html 文件如果不去主动刷新，是不会请求到最新的 html 的，也就不可能会有最新的 js，css 了**。所以这个时候，怎么检测最新版本并且刷新页面就显得很重要。

对于一般的发布，修改 js 与 css 的 hash 值，html 不会缓存，所以一般都是可以拿到最新的修改的。

目前临时解决方案有两个：接口和文件记录

- 通过**后端接口返回版本号判断是否有更新**，有更新，就把页面刷新一下。这个事情可以放到切换路由的时候做，比如 beforeEach，就是每次请求都查询，需要后端配合。
- 在编译的时候**自己生成一个 js 文件**，然后前端用 jsonp 去请求这个 js，**判断是否有更新。有更新，就把页面刷新一下**。这个事情可以放到切换路由的时候做，比如 beforeEach。这个时候可以添加到每次的接口请求之前请求一下这个文件，或者使用定时的模式，到时间主动去请求，与 electron 的更新很类似。
